login as: admuser
admuser@10.5.20.29's password:
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-157-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Sat Oct  4 09:55:45 PM CEST 2025

  System load:  0.0                Processes:              299
  Usage of /:   13.4% of 96.37GB   Users logged in:        1
  Memory usage: 16%                IPv4 address for ens33: 10.5.20.29
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm

New release '24.04.3 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Sat Oct  4 13:39:51 2025 from 10.5.34.33
admuser@admuser:~$ sudo -i
[sudo] password for admuser:
root@admuser:~# wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb
sudo dpkg -i cloudflared-linux-amd64.deb
--2025-10-04 21:56:05--  https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb
Resolving github.com (github.com)... 140.82.121.3
Connecting to github.com (github.com)|140.82.121.3|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://github.com/cloudflare/cloudflared/releases/download/2025.9.1/cloudflared-linux-amd64.deb [following]
--2025-10-04 21:56:05--  https://github.com/cloudflare/cloudflared/releases/download/2025.9.1/cloudflared-linux-amd64.deb
Reusing existing connection to github.com:443.
HTTP request sent, awaiting response... 302 Found
Location: https://release-assets.githubusercontent.com/github-production-release-asset/106867604/d51dc916-c5d4-4cd9-9aa5-59977c4f17b9?sp=r&sv=2018-11-09&sr=b&spr=https&se=2025-10-04T20%3A48%3A27Z&rscd=attachment%3B+filename%3Dcloudflared-linux-amd64.deb&rsct=application%2Foctet-stream&skoid=96c2d410-5711-43a1-aedd-ab1947aa7ab0&sktid=398a6654-997b-47e9-b12b-9515b896b4de&skt=2025-10-04T19%3A47%3A57Z&ske=2025-10-04T20%3A48%3A27Z&sks=b&skv=2018-11-09&sig=zqO0SUxCY1lNQj%2FFXtXzbp0kz83cUL8naXqz0SabCV4%3D&jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmVsZWFzZS1hc3NldHMuZ2l0aHVidXNlcmNvbnRlbnQuY29tIiwia2V5Ijoia2V5MSIsImV4cCI6MTc1OTYwOTU2NSwibmJmIjoxNzU5NjA3NzY1LCJwYXRoIjoicmVsZWFzZWFzc2V0cHJvZHVjdGlvbi5ibG9iLmNvcmUud2luZG93cy5uZXQifQ.BLV_-ZMSjXqcjKE8sDCZyFSHlegBj0pgBmahtSN9zeM&response-content-disposition=attachment%3B%20filename%3Dcloudflared-linux-amd64.deb&response-content-type=application%2Foctet-stream [following]
--2025-10-04 21:56:05--  https://release-assets.githubusercontent.com/github-production-release-asset/106867604/d51dc916-c5d4-4cd9-9aa5-59977c4f17b9?sp=r&sv=2018-11-09&sr=b&spr=https&se=2025-10-04T20%3A48%3A27Z&rscd=attachment%3B+filename%3Dcloudflared-linux-amd64.deb&rsct=application%2Foctet-stream&skoid=96c2d410-5711-43a1-aedd-ab1947aa7ab0&sktid=398a6654-997b-47e9-b12b-9515b896b4de&skt=2025-10-04T19%3A47%3A57Z&ske=2025-10-04T20%3A48%3A27Z&sks=b&skv=2018-11-09&sig=zqO0SUxCY1lNQj%2FFXtXzbp0kz83cUL8naXqz0SabCV4%3D&jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmVsZWFzZS1hc3NldHMuZ2l0aHVidXNlcmNvbnRlbnQuY29tIiwia2V5Ijoia2V5MSIsImV4cCI6MTc1OTYwOTU2NSwibmJmIjoxNzU5NjA3NzY1LCJwYXRoIjoicmVsZWFzZWFzc2V0cHJvZHVjdGlvbi5ibG9iLmNvcmUud2luZG93cy5uZXQifQ.BLV_-ZMSjXqcjKE8sDCZyFSHlegBj0pgBmahtSN9zeM&response-content-disposition=attachment%3B%20filename%3Dcloudflared-linux-amd64.deb&response-content-type=application%2Foctet-stream
Resolving release-assets.githubusercontent.com (release-assets.githubusercontent.com)... 185.199.108.133, 185.199.109.133, 185.199.110.133, ...
Connecting to release-assets.githubusercontent.com (release-assets.githubusercontent.com)|185.199.108.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 20176804 (19M) [application/octet-stream]
Saving to: ‘cloudflared-linux-amd64.deb’

cloudflared-linux-a 100%[===================>]  19.24M  11.6MB/s    in 1.7s

2025-10-04 21:56:07 (11.6 MB/s) - ‘cloudflared-linux-amd64.deb’ saved [20176804/20176804]

Selecting previously unselected package cloudflared.
(Reading database ... 176360 files and directories currently installed.)
Preparing to unpack cloudflared-linux-amd64.deb ...
Unpacking cloudflared (2025.9.1) ...
Setting up cloudflared (2025.9.1) ...
Processing triggers for man-db (2.10.2-1) ...
root@admuser:~# cloudflared --version
cloudflared version 2025.9.1 (built 2025-09-22-13:28 UTC)
root@admuser:~# cloudflared tunnel login
A browser window should have opened at the following URL:

https://dash.cloudflare.com/argotunnel?aud=&callback=https%3A%2F%2Flogin.cloudflareaccess.org%2F2aIaklW5r8eeNF62VtIlAMF0oUdvWUgJqStUgijyN1g%3D

If the browser failed to open, please visit the URL above directly in your browser.
2025-10-04T19:57:43Z INF You have successfully logged in.
If you wish to copy your credentials to a server, they have been saved to:
/root/.cloudflared/cert.pem

root@admuser:~# cd /root/.cloudflared/
root@admuser:~/.cloudflared# ls
cert.pem
root@admuser:~/.cloudflared# cloudflared tunnel create albpetrol-legal
Tunnel credentials written to /root/.cloudflared/3f017006-090f-4196-9d28-1dc777c480e7.json. cloudflared chose this file based on where your origin certificate was found. Keep this file secret. To revoke these credentials, delete the tunnel.

Created tunnel albpetrol-legal with id 3f017006-090f-4196-9d28-1dc777c480e7
root@admuser:~/.cloudflared#
root@admuser:~/.cloudflared#
root@admuser:~/.cloudflared#
root@admuser:~/.cloudflared#
root@admuser:~/.cloudflared# mkdir -p ~/.cloudflared

cat > ~/.cloudflared/config.yml << 'EOF'
tunnel: 3f017006-090f-4196-9d28-1dc777c480e7
credentials-file: /root/.cloudflared/3f017006-090f-4196-9d28-1dc777c480e7.json

ingress:
  - hostname: legal.yourdomain.com
    service: http://localhost:80
  - service: http_status:404
EOF
root@admuser:~/.cloudflared# mkdir -p ~/.cloudflared

cat > ~/.cloudflared/config.yml << 'EOF'
tunnel: 3f017006-090f-4196-9d28-1dc777c480e7
credentials-file: /root/.cloudflared/3f017006-090f-4196-9d28-1dc777c480e7.json

ingress:
  - hostname: legal.albpetrol.com
    service: http://localhost:80
  - service: http_status:404
EOF
root@admuser:~/.cloudflared# mkdir -p ~/.cloudflared

cat > ~/.cloudflared/config.yml << 'EOF'
tunnel: 3f017006-090f-4196-9d28-1dc777c480e7
credentials-file: /root/.cloudflared/3f017006-090f-4196-9d28-1dc777c480e7.json

ingress:
  - hostname: legal.albpetrol.al
    service: http://localhost:80
  - service: http_status:404
EOF
root@admuser:~/.cloudflared#
