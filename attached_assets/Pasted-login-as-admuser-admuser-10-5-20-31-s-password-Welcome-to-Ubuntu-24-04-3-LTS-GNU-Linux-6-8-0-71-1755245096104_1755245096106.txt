login as: admuser
admuser@10.5.20.31's password:
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-71-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Fri Aug 15 07:43:25 AM UTC 2025

  System load:  0.09               Processes:              300
  Usage of /:   19.1% of 71.77GB   Users logged in:        1
  Memory usage: 45%                IPv4 address for ens33: 10.5.20.31
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

5 additional security updates can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm


Last login: Thu Aug 14 21:21:37 2025 from 172.16.1.8
admuser@ceshtjeligjore:~$ sudo -i
[sudo] password for admuser:
root@ceshtjeligjore:~# wget -O fix_filtering_sorting.sh https://raw.githubusercontent.com/thanasdinaku/ceshtje_ligjore/main/fix_filtering_sorting.sh && chmod +x fix_filtering_sorting.sh && ./fix_filtering_sorting.sh
--2025-08-15 07:43:50--  https://raw.githubusercontent.com/thanasdinaku/ceshtje_ligjore/main/fix_filtering_sorting.sh
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected.
HTTP request sent, awaiting response... 404 Not Found
2025-08-15 07:43:51 ERROR 404: Not Found.

root@ceshtjeligjore:~# cd /opt/ceshtje_ligjore/ceshtje_ligjore && \
systemctl stop albpetrol-legal && \
cp -r client/ "client_backup_$(date +%Y%m%d_%H%M%S)/" && \
cat > client/src/components/case-table.tsx << 'EOF'
> EOF
npm run build
systemctl start albpetrol-legal
systemctl status albpetrol-legal --no-pager

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
transforming (3) src/main.tsxBrowserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
✓ 2151 modules transformed.
x Build failed in 2.56s
error during build:
client/src/pages/data-table.tsx (6:7): "default" is not exported by "client/src/components/case-table.tsx", imported by "client/src/pages/data-table.tsx".
file: /opt/ceshtje_ligjore/ceshtje_ligjore/client/src/pages/data-table.tsx:6:7

4: import Sidebar from "@/components/sidebar";
5: import Header from "@/components/header";
6: import CaseTable from "@/components/case-table";
          ^
7:
8: export default function DataTable() {

    at getRollupError (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/parseAst.js:396:41)
    at error (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/parseAst.js:392:42)
    at Module.error (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:15588:16)
    at Module.traceVariable (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:16037:29)
    at ModuleScope.findVariable (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:13820:39)
    at FunctionScope.findVariable (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:5283:38)
    at FunctionBodyScope.findVariable (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:5283:38)
    at Identifier.bind (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:5066:40)
    at CallExpression.bind (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:2649:28)
    at CallExpression.bind (file:///opt/ceshtje_ligjore/ceshtje_ligjore/node_modules/rollup/dist/es/shared/node-entry.js:11284:15)
● albpetrol-legal.service - Albpetrol Legal Management System
     Loaded: loaded (/etc/systemd/system/albpetrol-legal.service; enabled; preset: enabled)
     Active: active (running) since Fri 2025-08-15 07:50:59 UTC; 6ms ago
   Main PID: 155998 (node)
      Tasks: 6 (limit: 9428)
     Memory: 1.5M (peak: 1.5M)
        CPU: 4ms
     CGroup: /system.slice/albpetrol-legal.service
             └─155998 /usr/bin/node dist/index.js

Aug 15 07:50:59 ceshtjeligjore systemd[1]: Started albpetrol-legal.service …tem.
Hint: Some lines were ellipsized, use -l to show in full.
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# systemctl status albpetrol-legal --no-pager
● albpetrol-legal.service - Albpetrol Legal Management System
     Loaded: loaded (/etc/systemd/system/albpetrol-legal.service; enabled; preset: enabled)
     Active: active (running) since Fri 2025-08-15 07:50:59 UTC; 4min 6s ago
   Main PID: 155998 (node)
      Tasks: 11 (limit: 9428)
     Memory: 54.7M (peak: 74.7M)
        CPU: 951ms
     CGroup: /system.slice/albpetrol-legal.service
             └─155998 /usr/bin/node dist/index.js

Aug 15 07:52:17 ceshtjeligjore albpetrol-legal[155998]: 7:52:17 AM [express]…la…
Aug 15 07:52:21 ceshtjeligjore albpetrol-legal[155998]: 7:52:21 AM [express]…ci…
Aug 15 07:52:23 ceshtjeligjore albpetrol-legal[155998]: 7:52:23 AM [express]…ci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express]…ci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express]…ci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express]…ci…
Aug 15 07:52:31 ceshtjeligjore albpetrol-legal[155998]: 7:52:31 AM [express]…ci…
Aug 15 07:52:31 ceshtjeligjore albpetrol-legal[155998]: 7:52:31 AM [express]…ci…
Aug 15 07:52:32 ceshtjeligjore albpetrol-legal[155998]: 7:52:32 AM [express]…ci…
Aug 15 07:52:46 ceshtjeligjore albpetrol-legal[155998]: 7:52:46 AM [express]…oc…
Hint: Some lines were ellipsized, use -l to show in full.
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# grep -n "useDebounced" /opt/ceshtje_ligjore/ceshtje_ligjore/client/src/components/case-table.tsx
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# journalctl -u albpetrol-legal -n 20 --no-pager
Aug 15 07:51:27 ceshtjeligjore albpetrol-legal[155998]: 7:51:27 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:51:29 ceshtjeligjore albpetrol-legal[155998]: 7:51:29 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:51:36 ceshtjeligjore albpetrol-legal[155998]: 7:51:36 AM [express] GET /api/logout 302 in 6ms
Aug 15 07:51:36 ceshtjeligjore albpetrol-legal[155998]: 7:51:36 AM [express] GET /api/auth/user 401 in 2ms
Aug 15 07:51:46 ceshtjeligjore albpetrol-legal[155998]: Two-factor code sent to: thanas.dinaku@albpetrol.al
Aug 15 07:51:46 ceshtjeligjore albpetrol-legal[155998]: 7:51:46 AM [express] POST /api/login 200 in 1357ms :: {"requiresTwoFactor":true,"userId":"8e429db7-1…
Aug 15 07:52:14 ceshtjeligjore albpetrol-legal[155998]: 7:52:14 AM [express] POST /api/verify-2fa 200 in 18ms :: {"id":"8e429db7-15ae-4cbf-a807-7f4e365a0264…
Aug 15 07:52:14 ceshtjeligjore albpetrol-legal[155998]: 7:52:14 AM [express] GET /api/dashboard/stats 200 in 6ms :: {"totalEntries":5,"todayEntries":1,"acti…
Aug 15 07:52:14 ceshtjeligjore albpetrol-legal[155998]: 7:52:14 AM [express] GET /api/dashboard/recent-entries 200 in 11ms :: [{"id":6,"paditesi":"Isabel Lo…
Aug 15 07:52:17 ceshtjeligjore albpetrol-legal[155998]: 7:52:17 AM [express] GET /api/admin/users 200 in 5ms :: [{"id":"b4c949ef-5348-40f9-a347-b6bb365278e2…
Aug 15 07:52:17 ceshtjeligjore albpetrol-legal[155998]: 7:52:17 AM [express] GET /api/admin/user-stats 304 in 11ms :: {"totalUsers":3,"adminUsers":2,"regula…
Aug 15 07:52:21 ceshtjeligjore albpetrol-legal[155998]: 7:52:21 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:23 ceshtjeligjore albpetrol-legal[155998]: 7:52:23 AM [express] GET /api/data-entries 304 in 5ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express] GET /api/data-entries 304 in 4ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:28 ceshtjeligjore albpetrol-legal[155998]: 7:52:28 AM [express] GET /api/data-entries 304 in 5ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:31 ceshtjeligjore albpetrol-legal[155998]: 7:52:31 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:31 ceshtjeligjore albpetrol-legal[155998]: 7:52:31 AM [express] GET /api/data-entries 304 in 5ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:32 ceshtjeligjore albpetrol-legal[155998]: 7:52:32 AM [express] GET /api/data-entries 304 in 6ms :: {"entries":[{"id":6,"paditesi":"Isabel Loci…
Aug 15 07:52:46 ceshtjeligjore albpetrol-legal[155998]: 7:52:46 AM [express] GET /api/data-entries 304 in 19ms :: {"entries":[{"id":6,"paditesi":"Isabel Loc…
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# ls -la /opt/ceshtje_ligjore/ceshtje_ligjore/dist/
total 132
drwxr-xr-x  3 root root   4096 Aug 12 15:11 .
drwxr-xr-x 11 root root   4096 Aug 15 07:50 ..
-rw-r--r--  1 root root 121917 Aug 14 21:02 index.js
drwxr-xr-x  3 root root   4096 Aug 14 21:02 public
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# curl -s -o /dev/null -w "%{http_code}" http://localhost:5000
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# systemctl stop albpetrol-legalgal
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# cd /opt/ceshtje_ligjore/ceshtje_ligjore
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# cp client/src/components/case-table.tsx client/src/components/case-table.tsx.backup
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# cat > client/src/components/case-table.tsx << 'FILE_CONTENT_EOF'
import { useState, useEffect, useMemo } from "react";
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog";
import { Search, Edit, Trash2, ChevronLeft, ChevronRight, Download, FileSpreadsheet, ArrowUpDown, SortAsc, SortDesc, Eye } from "lucide-react";
import { apiRequest } from "@/lib/queryClient";
FILE_CONTENT_EOFog>gContent> => setEditingCase(null)}ryKey: ["/api/dashboard/rec
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# grep -n 'useDebounced' client/src/components/case-table.tsx
24:function useDebounced<T>(value: T, delay: number): T {
46:  const debouncedSearchTerm = useDebounced(searchTerm, 500);
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# systemctl start albpetrol-legal
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# systemctl status albpetrol-legal --no-pager
● albpetrol-legal.service - Albpetrol Legal Management System
     Loaded: loaded (/etc/systemd/system/albpetrol-legal.service; enabled; preset: enabled)
     Active: active (running) since Fri 2025-08-15 08:02:46 UTC; 9s ago
   Main PID: 156594 (node)
      Tasks: 11 (limit: 9428)
     Memory: 53.3M (peak: 76.1M)
        CPU: 696ms
     CGroup: /system.slice/albpetrol-legal.service
             └─156594 /usr/bin/node dist/index.js

Aug 15 08:02:46 ceshtjeligjore systemd[1]: Started albpetrol-legal.service …tem.
Aug 15 08:02:47 ceshtjeligjore albpetrol-legal[156594]: 8:02:47 AM [express] …00
Hint: Some lines were ellipsized, use -l to show in full.
root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore# curl -s -o /dev/null -w '%{http_code}' http://localhost:5000
200root@ceshtjeligjore:/opt/ceshtje_ligjore/ceshtje_ligjore#
