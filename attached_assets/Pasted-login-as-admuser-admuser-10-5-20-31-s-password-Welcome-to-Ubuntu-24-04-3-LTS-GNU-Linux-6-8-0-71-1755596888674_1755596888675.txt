login as: admuser
admuser@10.5.20.31's password:
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-71-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 19 09:42:36 AM UTC 2025

  System load:  0.17               Processes:              301
  Usage of /:   19.3% of 71.77GB   Users logged in:        1
  Memory usage: 49%                IPv4 address for ens33: 10.5.20.31
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

10 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

5 additional security updates can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm


Last login: Mon Aug 18 21:56:27 2025 from 172.16.1.8
admuser@ceshtjeligjore:~$ sudo nano deploy_todays_improvements.sh
[sudo] password for admuser:
admuser@ceshtjeligjore:~$ chmod +x deploy_todays_improvements.sh
./deploy_todays_improvements.sh
chmod: changing permissions of 'deploy_todays_improvements.sh': Operation not permitted
-bash: ./deploy_todays_improvements.sh: Permission denied
admuser@ceshtjeligjore:~$ sudo -i
root@ceshtjeligjore:~# chmod +x deploy_todays_improvements.sh
./deploy_todays_improvements.sh
chmod: cannot access 'deploy_todays_improvements.sh': No such file or directory
-bash: ./deploy_todays_improvements.sh: No such file or directory
root@ceshtjeligjore:~# sudo nano deploy_todays_improvements.sh
root@ceshtjeligjore:~# chmod +x deploy_todays_improvements.sh
./deploy_todays_improvements.sh
üöÄ Deploying today's improvements to Ubuntu production server...
üìÖ Tue Aug 19 09:45:30 AM UTC 2025

=== STEP 1: BACKUP CURRENT PRODUCTION ===
The authenticity of host '10.5.20.31 (10.5.20.31)' can't be established.
ED25519 key fingerprint is SHA256:DGOiM6FLkO03rhjcfhzoq6cKA3YfgNEtkXRPDfQwmlk.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.5.20.31' (ED25519) to the list of known hosts.
admuser@10.5.20.31's password:
sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper
sudo: a password is required
‚úÖ Production backup created

=== STEP 2: PREPARE FILES FOR DEPLOYMENT ===
üìã Copying improved files...
cp: cannot stat 'client/src/components/case-edit-form.tsx': No such file or directory
cp: cannot stat 'client/src/components/case-entry-form.tsx': No such file or directory
cp: cannot stat 'client/src/components/DocumentUploader.tsx': No such file or directory
cp: cannot stat 'server/routes.ts': No such file or directory
cp: cannot stat 'server/objectStorage.ts': No such file or directory
‚úÖ Files prepared for deployment

=== STEP 3: TRANSFER FILES TO PRODUCTION ===
üì§ Transferring files to production server...
admuser@10.5.20.31's password:
package.json                                  100%   52   223.6KB/s   00:00
package-lock.json                             100%   16KB  71.4MB/s   00:00
verify_deployment.sh                          100%  726     6.3MB/s   00:00
‚úÖ Files transferred

=== STEP 4: DEPLOY ON PRODUCTION SERVER ===
Pseudo-terminal will not be allocated because stdin is not a terminal.
admuser@10.5.20.31's password:
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-71-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 19 09:46:23 AM UTC 2025

  System load:  0.0                Processes:              309
  Usage of /:   19.3% of 71.77GB   Users logged in:        1
  Memory usage: 50%                IPv4 address for ens33: 10.5.20.31
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

10 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

5 additional security updates can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm


üîß Starting deployment on production server...
‚èπÔ∏è  Stopping albpetrol-legal service...
sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper
sudo: a password is required

=== STEP 5: CLEANUP ===
admuser@10.5.20.31's password:

‚ùå DEPLOYMENT FAILED!

üîß Troubleshooting steps:
   1. Check service logs: sudo journalctl -u albpetrol-legal -f
   2. Verify application status: sudo systemctl status albpetrol-legal
   3. Check application logs: cd /opt/ceshtje_ligjore/ceshtje_ligjore && npm run dev

üîô Rollback if needed:
   ssh admuser@10.5.20.31 'cd /opt/ceshtje_ligjore/ceshtje_ligjore && sudo systemctl stop albpetrol-legal && sudo cp -r ../backup_* . && sudo systemctl start albpetrol-legal'
root@ceshtjeligjore:~#
