login as: admuser
admuser@10.5.20.31's password:
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-71-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 19 11:19:13 AM UTC 2025

  System load:  0.17               Processes:              312
  Usage of /:   20.1% of 71.77GB   Users logged in:        1
  Memory usage: 50%                IPv4 address for ens33: 10.5.20.31
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

10 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

5 additional security updates can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm


Last login: Tue Aug 19 10:26:28 2025 from 10.5.34.33
admuser@ceshtjeligjore:~$ sudo -i
[sudo] password for admuser:
Sorry, try again.
[sudo] password for admuser:
root@ceshtjeligjore:~# wget https://raw.githubusercontent.com/thanasdinaku/ceshtje_ligjore/main/ubuntu_complete_deployment.sh
--2025-08-19 11:20:01--  https://raw.githubusercontent.com/thanasdinaku/ceshtje_ligjore/main/ubuntu_complete_deployment.sh
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected.
HTTP request sent, awaiting response... 404 Not Found
2025-08-19 11:20:01 ERROR 404: Not Found.

root@ceshtjeligjore:~# cat > ubuntu_deployment_script.sh << 'EOF'
#!/bin/bash

# Complete Ubuntu Deployment Script for Albanian Legal Case Management System
# Run this script on your Ubuntu 24.04.3 LTS server

set -e  # Exit on any error

echo "=========================================="
echo "Albanian Legal Case Management Deployment"
echo "Starting fresh installation..."
echo "=========================================="

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_warn() {
EOF pm2 logs" "❌ Application health check failed. Check logs with: sudo -u appu
log_info: command not found
chown: invalid user: ‘appuser:appuser’
log_info: command not found
log_info: command not found
sudo: unknown user appuser
sudo: error initializing audit plugin sudoers_audit
log_info: command not found
sudo: unknown user appuser
sudo: error initializing audit plugin sudoers_audit
log_info: command not found
chown: invalid user: ‘appuser:appuser’
chown: invalid user: ‘appuser:appuser’
log_info: command not found
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
log_info: command not found
Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable nginx
log_info: command not found
sudo: unknown user appuser
sudo: error initializing audit plugin sudoers_audit
sudo: unknown user appuser
sudo: error initializing audit plugin sudoers_audit
sudo: unknown user appuser
sudo: error initializing audit plugin sudoers_audit
log_info: command not found
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall is active and enabled on system startup
log_info: command not found

==========================================
DEPLOYMENT SUMMARY
==========================================
Application: Albanian Legal Case Management System
Location:
Database: PostgreSQL
Web Server: Nginx
Process Manager: PM2

DATABASE CREDENTIALS:
Database Name:
Database User:
Database Password:

ADMIN CREDENTIALS:
Email: it.system@albpetrol.al
Password: Admin2025!

ACCESS URLS:
Local: http://localhost:5000
External: http://10.5.20.31:5000
Domain: http://legal.albpetrol.al (if DNS configured)

USEFUL COMMANDS:
- Check app status: sudo -u appuser pm2 status
- View app logs: sudo -u appuser pm2 logs albpetrol-legal
- Restart app: sudo -u appuser pm2 restart albpetrol-legal
- Check nginx: systemctl status nginx
- Health check: /usr/local/bin/check-app-health.sh

IMPORTANT FILES:
- Application:
- Environment: /.env
- Nginx Config: /etc/nginx/sites-available/albpetrol-legal
- PM2 Config: /ecosystem.config.js
==========================================
log_info: command not found
Application is running
log_info: command not found
log_info: command not found
EOF: command not found
root@ceshtjeligjore:~# # First, let's clean up and create a proper script
rm -f ubuntu_deployment_script.sh

# Create the complete working script
cat > ubuntu_deployment_script.sh << 'EOF'
#!/bin/bash

# Complete Ubuntu Deployment Script for Albanian Legal Case Management System
set -e

echo "=========================================="
echo "Albanian Legal Case Management Deployment"
echo "Starting fresh installation..."
echo "=========================================="

# Update system
echo "[INFO] Updating system packages..."
apt update && apt upgrade -y

# Install required packages
echo "[INFO] Installing required packages..."
apt install -y curl wget git build-essential

# Install Node.js 20
./ubuntu_deployment_script.shript.sh appuser pm2 logs albpetrol-legal""led/it $A
==========================================
Albanian Legal Case Management Deployment
Starting fresh installation...
==========================================
[INFO] Updating system packages...
Hit:1 http://security.ubuntu.com/ubuntu noble-security InRelease
Hit:2 http://al.archive.ubuntu.com/ubuntu noble InRelease
Hit:3 http://al.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:4 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:5 http://al.archive.ubuntu.com/ubuntu noble-backports InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
16 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Calculating upgrade... Done
Get more security updates through Ubuntu Pro with 'esm-apps' enabled:
  libzvbi-common libavcodec60 libzvbi0t64 libavutil58 libswresample4
Learn more about Ubuntu Pro at https://ubuntu.com/pro
The following NEW packages will be installed:
  linux-headers-6.8.0-78 linux-headers-6.8.0-78-generic
  linux-image-6.8.0-78-generic linux-modules-6.8.0-78-generic
  linux-modules-extra-6.8.0-78-generic linux-tools-6.8.0-78
  linux-tools-6.8.0-78-generic
The following upgrades have been deferred due to phasing:
  intel-media-va-driver
The following packages will be upgraded:
  libldb2 libmalcontent-0-0 libsmbclient0 libwbclient0 linux-generic
  linux-headers-generic linux-image-generic linux-libc-dev linux-tools-common
  powermgmt-base python3-software-properties samba-libs simple-scan
  software-properties-common software-properties-gtk
15 upgraded, 7 newly installed, 0 to remove and 1 not upgraded.
5 standard LTS security updates
Need to get 6,705 kB/200 MB of archives.
After this operation, 301 MB of additional disk space will be used.
Get:1 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 powermgmt-base all 1.37ubuntu0.1 [7,650 B]
Get:2 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 libsmbclient0 amd64 2:4.19.5+dfsg-4ubuntu9.3 [62.4 kB]
Get:3 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 libldb2 amd64 2:2.8.0+samba4.19.5+dfsg-4ubuntu9.3 [188 kB]
Get:4 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 samba-libs amd64 2:4.19.5+dfsg-4ubuntu9.3 [6,018 kB]
Get:5 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 libwbclient0 amd64 2:4.19.5+dfsg-4ubuntu9.3 [71.4 kB]
Get:6 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 libmalcontent-0-0 amd64 0.11.1-1ubuntu1.2 [22.3 kB]
Get:7 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 software-properties-common all 0.99.49.3 [14.4 kB]
Get:8 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 software-properties-gtk all 0.99.49.3 [83.2 kB]
Get:9 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 python3-software-properties all 0.99.49.3 [29.9 kB]
Get:10 http://al.archive.ubuntu.com/ubuntu noble-updates/main amd64 simple-scan amd64 46.0-0ubuntu2.1 [208 kB]
Fetched 6,705 kB in 2s (3,127 kB/s)
(Reading database ... 235973 files and directories currently installed.)
Preparing to unpack .../00-powermgmt-base_1.37ubuntu0.1_all.deb ...
Unpacking powermgmt-base (1.37ubuntu0.1) over (1.37) ...
Preparing to unpack .../01-libsmbclient0_2%3a4.19.5+dfsg-4ubuntu9.3_amd64.deb ...
Unpacking libsmbclient0:amd64 (2:4.19.5+dfsg-4ubuntu9.3) over (2:4.19.5+dfsg-4ubuntu9.2) ...
Preparing to unpack .../02-libldb2_2%3a2.8.0+samba4.19.5+dfsg-4ubuntu9.3_amd64.deb ...
Unpacking libldb2:amd64 (2:2.8.0+samba4.19.5+dfsg-4ubuntu9.3) over (2:2.8.0+samba4.19.5+dfsg-4ubuntu9.2) ...
Preparing to unpack .../03-samba-libs_2%3a4.19.5+dfsg-4ubuntu9.3_amd64.deb ...
Unpacking samba-libs:amd64 (2:4.19.5+dfsg-4ubuntu9.3) over (2:4.19.5+dfsg-4ubuntu9.2) ...
Preparing to unpack .../04-libwbclient0_2%3a4.19.5+dfsg-4ubuntu9.3_amd64.deb ...
Unpacking libwbclient0:amd64 (2:4.19.5+dfsg-4ubuntu9.3) over (2:4.19.5+dfsg-4ubuntu9.2) ...
Preparing to unpack .../05-libmalcontent-0-0_0.11.1-1ubuntu1.2_amd64.deb ...
Unpacking libmalcontent-0-0:amd64 (0.11.1-1ubuntu1.2) over (0.11.1-1ubuntu1.1) ...
Selecting previously unselected package linux-modules-6.8.0-78-generic.
Preparing to unpack .../06-linux-modules-6.8.0-78-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-modules-6.8.0-78-generic (6.8.0-78.78) ...
Selecting previously unselected package linux-image-6.8.0-78-generic.
Preparing to unpack .../07-linux-image-6.8.0-78-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-image-6.8.0-78-generic (6.8.0-78.78) ...
Selecting previously unselected package linux-modules-extra-6.8.0-78-generic.
Preparing to unpack .../08-linux-modules-extra-6.8.0-78-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-modules-extra-6.8.0-78-generic (6.8.0-78.78) ...
Preparing to unpack .../09-linux-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-generic (6.8.0-78.78) over (6.8.0-71.71) ...
Preparing to unpack .../10-linux-image-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-image-generic (6.8.0-78.78) over (6.8.0-71.71) ...
Selecting previously unselected package linux-headers-6.8.0-78.
Preparing to unpack .../11-linux-headers-6.8.0-78_6.8.0-78.78_all.deb ...
Unpacking linux-headers-6.8.0-78 (6.8.0-78.78) ...
Selecting previously unselected package linux-headers-6.8.0-78-generic.
Preparing to unpack .../12-linux-headers-6.8.0-78-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-headers-6.8.0-78-generic (6.8.0-78.78) ...
Preparing to unpack .../13-linux-headers-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-headers-generic (6.8.0-78.78) over (6.8.0-71.71) ...
Preparing to unpack .../14-linux-libc-dev_6.8.0-78.78_amd64.deb ...
Unpacking linux-libc-dev:amd64 (6.8.0-78.78) over (6.8.0-71.71) ...
Preparing to unpack .../15-linux-tools-common_6.8.0-78.78_all.deb ...
Unpacking linux-tools-common (6.8.0-78.78) over (6.8.0-71.71) ...
Selecting previously unselected package linux-tools-6.8.0-78.
Preparing to unpack .../16-linux-tools-6.8.0-78_6.8.0-78.78_amd64.deb ...
Unpacking linux-tools-6.8.0-78 (6.8.0-78.78) ...
Selecting previously unselected package linux-tools-6.8.0-78-generic.
Preparing to unpack .../17-linux-tools-6.8.0-78-generic_6.8.0-78.78_amd64.deb ...
Unpacking linux-tools-6.8.0-78-generic (6.8.0-78.78) ...
Preparing to unpack .../18-software-properties-common_0.99.49.3_all.deb ...
Unpacking software-properties-common (0.99.49.3) over (0.99.49.2) ...
Preparing to unpack .../19-software-properties-gtk_0.99.49.3_all.deb ...
Unpacking software-properties-gtk (0.99.49.3) over (0.99.49.2) ...
Preparing to unpack .../20-python3-software-properties_0.99.49.3_all.deb ...
Unpacking python3-software-properties (0.99.49.3) over (0.99.49.2) ...
Preparing to unpack .../21-simple-scan_46.0-0ubuntu2.1_amd64.deb ...
Unpacking simple-scan (46.0-0ubuntu2.1) over (46.0-0ubuntu2) ...
Setting up powermgmt-base (1.37ubuntu0.1) ...
Setting up linux-modules-6.8.0-78-generic (6.8.0-78.78) ...
Setting up linux-libc-dev:amd64 (6.8.0-78.78) ...
Setting up libwbclient0:amd64 (2:4.19.5+dfsg-4ubuntu9.3) ...
Setting up linux-image-6.8.0-78-generic (6.8.0-78.78) ...
I: /boot/vmlinuz.old is now a symlink to vmlinuz-6.8.0-71-generic
I: /boot/initrd.img.old is now a symlink to initrd.img-6.8.0-71-generic
I: /boot/vmlinuz is now a symlink to vmlinuz-6.8.0-78-generic
I: /boot/initrd.img is now a symlink to initrd.img-6.8.0-78-generic
Setting up linux-headers-6.8.0-78 (6.8.0-78.78) ...
Setting up python3-software-properties (0.99.49.3) ...
Setting up simple-scan (46.0-0ubuntu2.1) ...
Setting up libldb2:amd64 (2:2.8.0+samba4.19.5+dfsg-4ubuntu9.3) ...
Setting up linux-tools-common (6.8.0-78.78) ...
Setting up linux-tools-6.8.0-78 (6.8.0-78.78) ...
Setting up libmalcontent-0-0:amd64 (0.11.1-1ubuntu1.2) ...
Setting up linux-headers-6.8.0-78-generic (6.8.0-78.78) ...
Setting up linux-modules-extra-6.8.0-78-generic (6.8.0-78.78) ...
Setting up samba-libs:amd64 (2:4.19.5+dfsg-4ubuntu9.3) ...
Setting up linux-headers-generic (6.8.0-78.78) ...
Setting up linux-tools-6.8.0-78-generic (6.8.0-78.78) ...
Setting up software-properties-common (0.99.49.3) ...
Setting up libsmbclient0:amd64 (2:4.19.5+dfsg-4ubuntu9.3) ...
Setting up linux-image-generic (6.8.0-78.78) ...
Setting up linux-generic (6.8.0-78.78) ...
Setting up software-properties-gtk (0.99.49.3) ...
Processing triggers for libglib2.0-0t64:amd64 (2.80.0-6ubuntu3.4) ...
Processing triggers for dbus (1.14.10-4ubuntu4.1) ...
Processing triggers for shared-mime-info (2.4-4) ...
Processing triggers for mailcap (3.70+nmu1ubuntu1) ...
Processing triggers for bamfdaemon (0.5.6+22.04.20220217-0ubuntu5) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils (0.27-2build1) ...
Processing triggers for hicolor-icon-theme (0.17-2) ...
Processing triggers for gnome-menus (3.36.0-1.1ubuntu3) ...
Processing triggers for libc-bin (2.39-0ubuntu8.5) ...
Processing triggers for man-db (2.12.0-4build2) ...
Processing triggers for linux-image-6.8.0-78-generic (6.8.0-78.78) ...
/etc/kernel/postinst.d/initramfs-tools:
update-initramfs: Generating /boot/initrd.img-6.8.0-78-generic
/etc/kernel/postinst.d/zz-update-grub:
Sourcing file `/etc/default/grub'
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-6.8.0-78-generic
Found initrd image: /boot/initrd.img-6.8.0-78-generic
Found linux image: /boot/vmlinuz-6.8.0-71-generic
Found initrd image: /boot/initrd.img-6.8.0-71-generic
Found linux image: /boot/vmlinuz-5.15.0-151-generic
Found initrd image: /boot/initrd.img-5.15.0-151-generic
Found memtest86+ 64bit EFI image: /memtest86+x64.efi
Warning: os-prober will not be executed to detect other bootable partitions.
Systems on them will not be added to the GRUB boot configuration.
Check GRUB_DISABLE_OS_PROBER documentation entry.
Adding boot menu entry for UEFI Firmware Settings ...
done
Scanning processes...
Scanning linux images...

Pending kernel upgrade!
Running kernel version:
  6.8.0-71-generic
Diagnostics:
  The currently running kernel version is not the expected kernel version
6.8.0-78-generic.

Restarting the system to load the new kernel will not be handled automatically,
so you should consider rebooting.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
[INFO] Installing required packages...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
wget set to manually installed.
git is already the newest version (1:2.43.0-1ubuntu7.3).
build-essential is already the newest version (12.10ubuntu1).
The following packages were automatically installed and are no longer required:
  linux-headers-5.15.0-151 linux-headers-5.15.0-151-generic
  linux-image-5.15.0-151-generic linux-modules-5.15.0-151-generic
  linux-modules-extra-5.15.0-151-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[INFO] Installing Node.js 20...
2025-08-19 11:24:51 - Installing pre-requisites
Hit:1 http://security.ubuntu.com/ubuntu noble-security InRelease
Hit:2 http://al.archive.ubuntu.com/ubuntu noble InRelease
Hit:3 http://al.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:4 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:5 http://al.archive.ubuntu.com/ubuntu noble-backports InRelease
Reading package lists... Done
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
apt-transport-https is already the newest version (2.8.3).
ca-certificates is already the newest version (20240203).
curl is already the newest version (8.5.0-2ubuntu10.6).
gnupg is already the newest version (2.4.4-2ubuntu17.3).
The following packages were automatically installed and are no longer required:
  linux-headers-5.15.0-151 linux-headers-5.15.0-151-generic
  linux-image-5.15.0-151-generic linux-modules-5.15.0-151-generic
  linux-modules-extra-5.15.0-151-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
Hit:1 http://al.archive.ubuntu.com/ubuntu noble InRelease
Hit:2 http://al.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:3 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:4 http://al.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:5 http://security.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
2025-08-19 11:24:54 - Repository configured successfully.
2025-08-19 11:24:54 - To install Node.js, run: apt-get install nodejs -y
2025-08-19 11:24:54 - You can use N|solid Runtime as a node.js alternative
2025-08-19 11:24:54 - To install N|solid Runtime, run: apt-get install nsolid -y

Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nodejs is already the newest version (20.19.4-1nodesource1).
The following packages were automatically installed and are no longer required:
  linux-headers-5.15.0-151 linux-headers-5.15.0-151-generic
  linux-image-5.15.0-151-generic linux-modules-5.15.0-151-generic
  linux-modules-extra-5.15.0-151-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[INFO] Installing PostgreSQL...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
postgresql is already the newest version (16+257build1.1).
postgresql-contrib is already the newest version (16+257build1.1).
The following packages were automatically installed and are no longer required:
  linux-headers-5.15.0-151 linux-headers-5.15.0-151-generic
  linux-image-5.15.0-151-generic linux-modules-5.15.0-151-generic
  linux-modules-extra-5.15.0-151-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[INFO] Installing Nginx...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nginx is already the newest version (1.24.0-2ubuntu7.4).
The following packages were automatically installed and are no longer required:
  linux-headers-5.15.0-151 linux-headers-5.15.0-151-generic
  linux-image-5.15.0-151-generic linux-modules-5.15.0-151-generic
  linux-modules-extra-5.15.0-151-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[INFO] Installing PM2...

added 133 packages in 12s

13 packages are looking for funding
  run `npm fund` for details
[INFO] Creating application user...
[INFO] Stopping existing services...

                        -------------

__/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
 _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
  _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
   _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
    _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
     _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
      _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
       _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
        _\///______________\///______________\///__\///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager for Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance 4 instances of api.js:
                $ pm2 start api.js -i 4

                Monitor in production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


                        -------------

[PM2] Spawning PM2 daemon with pm2_home=/root/.pm2
[PM2] PM2 Successfully daemonized
[PM2][WARN] No process found
[PM2] [v] All Applications Stopped
[PM2] [v] PM2 Daemon Stopped
[INFO] Starting PostgreSQL...
Synchronizing state of postgresql.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable postgresql
[INFO] Creating application directory: /opt/ceshtje-ligjore
[INFO] Cloning repository...
Cloning into '/opt/ceshtje-ligjore'...
remote: Enumerating objects: 1118, done.
remote: Counting objects: 100% (1118/1118), done.
remote: Compressing objects: 100% (322/322), done.
remote: Total 1118 (delta 805), reused 1093 (delta 780), pack-reused 0 (from 0)
Receiving objects: 100% (1118/1118), 1.14 MiB | 1.16 MiB/s, done.
Resolving deltas: 100% (805/805), done.
[INFO] Installing Node.js dependencies...
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is

added 680 packages, and audited 681 packages in 17s

89 packages are looking for funding
  run `npm fund` for details

10 vulnerabilities (1 low, 8 moderate, 1 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.5.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
npm notice To update run: npm install -g npm@11.5.2
npm notice
[INFO] Setting up PostgreSQL database...
NOTICE:  database "ceshtje_ligjore" does not exist, skipping
DROP DATABASE
NOTICE:  role "ceshtje_user" does not exist, skipping
DROP ROLE
CREATE DATABASE
CREATE ROLE
GRANT
ALTER ROLE
[INFO] Creating environment configuration...
[INFO] Building the application...

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
transforming (3) src/main.tsxBrowserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
✓ 2152 modules transformed.
../dist/public/index.html                                         1.04 kB │ gzip:   0.58 kB
../dist/public/assets/Albpetrol.svg_1754604323425-C1lBmiZp.png   93.96 kB
../dist/public/assets/index-DeFfSDSf.css                         71.43 kB │ gzip:  12.57 kB
../dist/public/assets/index-RjoRxsk1.js                         594.83 kB │ gzip: 174.10 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 3.72s

  dist/index.js  119.1kb

⚡ Done in 8ms
[INFO] Running database migrations...

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/opt/ceshtje-ligjore/drizzle.config.ts'
Using 'pg' driver for database querying
[⣷] Pulling schema from database...
TypeError: Invalid URL
    at new URL (node:internal/url:806:29)
    at parse (/opt/ceshtje-ligjore/node_modules/pg-connection-string/index.js:29:14)
    at new ConnectionParameters (/opt/ceshtje-ligjore/node_modules/pg/lib/connection-parameters.js:56:42)
    at new Client (/opt/ceshtje-ligjore/node_modules/pg/lib/client.js:18:33)
    at BoundPool.newClient (/opt/ceshtje-ligjore/node_modules/pg-pool/index.js:218:20)
    at BoundPool.connect (/opt/ceshtje-ligjore/node_modules/pg-pool/index.js:212:10)
    at BoundPool.query (/opt/ceshtje-ligjore/node_modules/pg-pool/index.js:399:10)
    at Object.query (/opt/ceshtje-ligjore/node_modules/drizzle-kit/bin.cjs:66575:39)
    at fromDatabase2 (/opt/ceshtje-ligjore/node_modules/drizzle-kit/bin.cjs:18700:34)
    at pgPushIntrospect (/opt/ceshtje-ligjore/node_modules/drizzle-kit/bin.cjs:69374:9) {
  code: 'ERR_INVALID_URL',
  input: 'postgresql://ceshtje_user:gjrWzGdZQMc0lU/wu/hYEbFBTF5y1cZ6AYg/QslPkAk=@localhost:5432/ceshtje_ligjore',
  base: 'postgres://base'
}
[INFO] Creating PM2 configuration...
[INFO] Configuring Nginx...
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable nginx
[INFO] Starting the application...

                        -------------

__/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
 _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
  _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
   _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
    _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
     _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
      _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
       _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
        _\///______________\///______________\///__\///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager for Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance 4 instances of api.js:
                $ pm2 start api.js -i 4

                Monitor in production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


                        -------------

[PM2] Spawning PM2 daemon with pm2_home=/home/appuser/.pm2
[PM2] PM2 Successfully daemonized
[PM2][ERROR] File /opt/ceshtje-ligjore/ecosystem.config.js malformated
ReferenceError: module is not defined
    at file:///opt/ceshtje-ligjore/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:387:35)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:323:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1371:24)
    at Module._compile (node:internal/modules/cjs/loader:1511:5)
    at Module._extensions..js (node:internal/modules/cjs/loader:1572:16)
    at Module.load (node:internal/modules/cjs/loader:1275:32)
    at Module._load (node:internal/modules/cjs/loader:1096:12)
    at Module.require (node:internal/modules/cjs/loader:1298:19)
    at require (node:internal/modules/helpers:182:18)
root@ceshtjeligjore:~#
