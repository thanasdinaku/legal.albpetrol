root@admuser:/opt/ceshtje-ligjore# # On Ubuntu server - Check latest transfer attempt
tail -100 /opt/ceshtje-ligjore/logs/out-0.log | grep -A 20 "ROUTE HANDLER"
2025-10-06T08:32:16: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:32:16: Request body: {
2025-10-06T08:32:16:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:32:16:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:32:16: }
2025-10-06T08:32:16: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:32:16: 8:32:16 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:32:18: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:32:18: Request body: {
2025-10-06T08:32:18:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:32:18:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:32:18: }
2025-10-06T08:32:18: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:32:18: 8:32:18 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:23: 8:34:23 AM [express] GET /api/auth/user 304 in 3ms :: {"id":"it-system-admin","email":"it.system@alb…
2025-10-06T08:34:23: 8:34:23 AM [express] GET /api/users 304 in 4ms :: [{"id":"5f93759a-589d-4bf9-8b0f-390d4bbc584e","ema…
2025-10-06T08:34:25: 8:34:25 AM [express] GET /api/auth/user 304 in 4ms :: {"id":"it-system-admin","email":"it.system@alb…
2025-10-06T08:34:25: 8:34:25 AM [express] GET /api/users 304 in 4ms :: [{"id":"5f93759a-589d-4bf9-8b0f-390d4bbc584e","ema…
2025-10-06T08:34:25: 8:34:25 AM [express] GET /api/auth/user 304 in 3ms :: {"id":"it-system-admin","email":"it.system@alb…
2025-10-06T08:34:25: 8:34:25 AM [express] GET /api/users 304 in 3ms :: [{"id":"5f93759a-589d-4bf9-8b0f-390d4bbc584e","ema…
2025-10-06T08:34:26: 8:34:26 AM [express] GET /api/auth/user 304 in 3ms :: {"id":"it-system-admin","email":"it.system@alb…
2025-10-06T08:34:26: 8:34:26 AM [express] GET /api/users 304 in 3ms :: [{"id":"5f93759a-589d-4bf9-8b0f-390d4bbc584e","ema…
2025-10-06T08:34:26: 8:34:26 AM [express] GET /api/auth/user 304 in 3ms :: {"id":"it-system-admin","email":"it.system@alb…
2025-10-06T08:34:26: 8:34:26 AM [express] GET /api/users 304 in 4ms :: [{"id":"5f93759a-589d-4bf9-8b0f-390d4bbc584e","ema…
2025-10-06T08:34:32: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:32: Request body: {
2025-10-06T08:34:32:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:32:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:32: }
2025-10-06T08:34:32: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:32: 8:34:32 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:34: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:34: Request body: {
2025-10-06T08:34:34:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:34:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:34: }
2025-10-06T08:34:34: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:34: 8:34:34 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:43: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:43: Request body: {
2025-10-06T08:34:43:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:43:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:43: }
2025-10-06T08:34:43: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:43: 8:34:43 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:45: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:45: Request body: {
2025-10-06T08:34:45:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:45:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:45: }
2025-10-06T08:34:45: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:45: 8:34:45 AM [express] POST /api/transfer-cases 500 in 4ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:57: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:57: Request body: {
2025-10-06T08:34:57:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:57:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:57: }
2025-10-06T08:34:57: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:57: 8:34:57 AM [express] POST /api/transfer-cases 500 in 9ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:34:59: 🚀 ROUTE HANDLER CALLED - /api/transfer-cases
2025-10-06T08:34:59: Request body: {
2025-10-06T08:34:59:   fromUserId: '5f93759a-589d-4bf9-8b0f-390d4bbc584e',
2025-10-06T08:34:59:   toUserId: '3ca4ff87-7a4f-4de4-adde-23a2b54acfdc'
2025-10-06T08:34:59: }
2025-10-06T08:34:59: Extracted fromUserId: 5f93759a-589d-4bf9-8b0f-390d4bbc584e toUserId: 3ca4ff87-7a4f-4de4-adde-23a2b54acfdc
2025-10-06T08:34:59: 8:34:59 AM [express] POST /api/transfer-cases 500 in 3ms :: {"error":"Failed to transfer cases"}
2025-10-06T08:37:33: [2025-10-06T06:37:33.434Z] 🕐 AUTOMATIC CHECK TRIGGERED (every 10 minutes)
2025-10-06T08:37:33: [2025-10-06T06:37:33.435Z] === COURT HEARING CHECK STARTED ===
2025-10-06T08:37:33: Current time (GMT+1): 06.10.2025, 08:37
2025-10-06T08:37:33: Checking hearings within ≤26 hours: up to 07.10.2025, 08:37 [Albania Time]
2025-10-06T08:37:33: Checking entry 1 - hearing field: "2025-10-05T23:12"
2025-10-06T08:37:33: Parsing date string: 2025-10-05T23:12
2025-10-06T08:37:33: Parsed exactly as stored: 2025-10-05T21:12:00.000Z from input: 2025-10-05T23:12
2025-10-06T08:37:33: Parsed hearing date: 2025-10-05T21:12:00.000Z
2025-10-06T08:37:33:     Window check: hearing=2025-10-05T21:12:00.000Z, now=2025-10-06T06:37:33.446Z, hours_ahead=-9.4, window=≤26h, result=false
2025-10-06T08:37:33: Is within notification window: false (hearing at 2025-10-05T21:12:00.000Z is -9 hours from now)
2025-10-06T08:37:33: Checking entry 1 appeal - hearing field: "2025-10-05T23:42"
2025-10-06T08:37:33: Parsing date string: 2025-10-05T23:42
2025-10-06T08:37:33: Parsed exactly as stored: 2025-10-05T21:42:00.000Z from input: 2025-10-05T23:42
2025-10-06T08:37:33: Parsed appeal hearing date: 2025-10-05T21:42:00.000Z
root@admuser:/opt/ceshtje-ligjore# # On Ubuntu server - Rebuild and restart
npm run build && pm2 restart albpetrol-legal

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.20 building for production...
✓ 2411 modules transformed.
../dist/public/index.html                                         1.09 kB │ gzip:   0.62 kB
../dist/public/assets/Albpetrol.svg_1754604323425-C1lBmiZp.png   93.96 kB
../dist/public/assets/index-D1b5zML-.css                        159.05 kB │ gzip:  25.36 kB
../dist/public/assets/index-BaTynYKG.js                         870.49 kB │ gzip: 255.57 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 3.99s

  dist/index.js  189.3kb

⚡ Done in 7ms
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [albpetrol-legal](ids: [ 0 ])
[PM2] [albpetrol-legal](0) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ albpetrol-legal    │ fork     │ 14   │ online    │ 0%       │ 17.0mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@admuser:/opt/ceshtje-ligjore#
