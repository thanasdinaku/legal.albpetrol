root@ceshtjeligjore:/opt/ceshtje-ligjore# # Start the application again with PM2
pm2 start ecosystem.config.cjs

# Wait a moment for startup
sleep 3

# Check if it's working now (should not have WebSocket errors)
pm2 logs albpetrol-legal --lines 5

# Test the application endpoint
curl -I http://localhost:5000/

echo "=== APPLICATION STARTED WITH FIXED DB DRIVER ==="
[PM2][WARN] Applications albpetrol-legal not running, starting...
[PM2] App [albpetrol-legal] launched (1 instances)
┌────┬────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name               │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ albpetrol-legal    │ default     │ 1.0.0   │ fork    │ 13771    │ 0s     │ 0    │ online    │ 0%       │ 19.5mb   │ root     │ disabled │
└────┴────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
[TAILING] Tailing last 5 lines for [albpetrol-legal] process (change the value with --lines option)
/opt/ceshtje-ligjore/logs/out-0.log last 5 lines:
/opt/ceshtje-ligjore/logs/err-0.log last 5 lines:
0|albpetro | 2025-08-20T08:18:43:     address: '127.0.0.1',
0|albpetro | 2025-08-20T08:18:43:     port: 443
0|albpetro | 2025-08-20T08:18:43:   },
0|albpetro | 2025-08-20T08:18:43:   [Symbol(kMessage)]: 'connect ECONNREFUSED 127.0.0.1:443'
0|albpetro | 2025-08-20T08:18:43: }

0|albpetrol-legal  | 2025-08-20T08:18:51: ErrorEvent {
0|albpetrol-legal  | 2025-08-20T08:18:51:   [Symbol(kTarget)]: WebSocket {
0|albpetrol-legal  | 2025-08-20T08:18:51:     _events: [Object: null prototype] {
0|albpetrol-legal  | 2025-08-20T08:18:51:       error: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:51:       message: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:51:       close: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:51:       open: [Function]
0|albpetrol-legal  | 2025-08-20T08:18:51:     },
0|albpetrol-legal  | 2025-08-20T08:18:51:     _eventsCount: 4,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _maxListeners: undefined,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _binaryType: 'arraybuffer',
0|albpetrol-legal  | 2025-08-20T08:18:51:     _closeCode: 1006,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _closeFrameReceived: false,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _closeFrameSent: false,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _closeMessage: <Buffer >,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _closeTimer: null,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _errorEmitted: true,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _extensions: {},
0|albpetrol-legal  | 2025-08-20T08:18:51:     _paused: false,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _protocol: '',
0|albpetrol-legal  | 2025-08-20T08:18:51:     _readyState: 3,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _receiver: null,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _sender: null,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _socket: null,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _bufferedAmount: 0,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _isServer: false,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _redirects: 0,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _autoPong: true,
0|albpetrol-legal  | 2025-08-20T08:18:51:     _url: 'wss://localhost/v2',
0|albpetrol-legal  | 2025-08-20T08:18:51:     _req: null,
0|albpetrol-legal  | 2025-08-20T08:18:51:     [Symbol(shapeMode)]: false,
0|albpetrol-legal  | 2025-08-20T08:18:51:     [Symbol(kCapture)]: false
0|albpetrol-legal  | 2025-08-20T08:18:51:   },
0|albpetrol-legal  | 2025-08-20T08:18:51:   [Symbol(kType)]: 'error',
0|albpetrol-legal  | 2025-08-20T08:18:51:   [Symbol(kError)]: Error: connect ECONNREFUSED 127.0.0.1:443
0|albpetrol-legal  | 2025-08-20T08:18:51:       at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16) {
0|albpetrol-legal  | 2025-08-20T08:18:51:     errno: -111,
0|albpetrol-legal  | 2025-08-20T08:18:51:     code: 'ECONNREFUSED',
0|albpetrol-legal  | 2025-08-20T08:18:51:     syscall: 'connect',
0|albpetrol-legal  | 2025-08-20T08:18:51:     address: '127.0.0.1',
0|albpetrol-legal  | 2025-08-20T08:18:51:     port: 443
0|albpetrol-legal  | 2025-08-20T08:18:51:   },
0|albpetrol-legal  | 2025-08-20T08:18:51:   [Symbol(kMessage)]: 'connect ECONNREFUSED 127.0.0.1:443'
0|albpetrol-legal  | 2025-08-20T08:18:51: }
0|albpetrol-legal  | 2025-08-20T08:18:59: ErrorEvent {
0|albpetrol-legal  | 2025-08-20T08:18:59:   [Symbol(kTarget)]: WebSocket {
0|albpetrol-legal  | 2025-08-20T08:18:59:     _events: [Object: null prototype] {
0|albpetrol-legal  | 2025-08-20T08:18:59:       error: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:59:       message: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:59:       close: [Function],
0|albpetrol-legal  | 2025-08-20T08:18:59:       open: [Function]
0|albpetrol-legal  | 2025-08-20T08:18:59:     },
0|albpetrol-legal  | 2025-08-20T08:18:59:     _eventsCount: 4,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _maxListeners: undefined,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _binaryType: 'arraybuffer',
0|albpetrol-legal  | 2025-08-20T08:18:59:     _closeCode: 1006,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _closeFrameReceived: false,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _closeFrameSent: false,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _closeMessage: <Buffer >,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _closeTimer: null,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _errorEmitted: true,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _extensions: {},
0|albpetrol-legal  | 2025-08-20T08:18:59:     _paused: false,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _protocol: '',
0|albpetrol-legal  | 2025-08-20T08:18:59:     _readyState: 3,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _receiver: null,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _sender: null,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _socket: null,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _bufferedAmount: 0,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _isServer: false,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _redirects: 0,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _autoPong: true,
0|albpetrol-legal  | 2025-08-20T08:18:59:     _url: 'wss://localhost/v2',
0|albpetrol-legal  | 2025-08-20T08:18:59:     _req: null,
0|albpetrol-legal  | 2025-08-20T08:18:59:     [Symbol(shapeMode)]: false,
0|albpetrol-legal  | 2025-08-20T08:18:59:     [Symbol(kCapture)]: false
0|albpetrol-legal  | 2025-08-20T08:18:59:   },
0|albpetrol-legal  | 2025-08-20T08:18:59:   [Symbol(kType)]: 'error',
0|albpetrol-legal  | 2025-08-20T08:18:59:   [Symbol(kError)]: Error: connect ECONNREFUSED 127.0.0.1:443
0|albpetrol-legal  | 2025-08-20T08:18:59:       at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16) {
0|albpetrol-legal  | 2025-08-20T08:18:59:     errno: -111,
0|albpetrol-legal  | 2025-08-20T08:18:59:     code: 'ECONNREFUSED',
0|albpetrol-legal  | 2025-08-20T08:18:59:     syscall: 'connect',
0|albpetrol-legal  | 2025-08-20T08:18:59:     address: '127.0.0.1',
0|albpetrol-legal  | 2025-08-20T08:18:59:     port: 443
0|albpetrol-legal  | 2025-08-20T08:18:59:   },
0|albpetrol-legal  | 2025-08-20T08:18:59:   [Symbol(kMessage)]: 'connect ECONNREFUSED 127.0.0.1:443'
0|albpetrol-legal  | 2025-08-20T08:18:59: }
^C
curl: (7) Failed to connect to localhost port 5000 after 0 ms: Couldn't connect to server
=== APPLICATION STARTED WITH FIXED DB DRIVER ===
root@ceshtjeligjore:/opt/ceshtje-ligjore# 
